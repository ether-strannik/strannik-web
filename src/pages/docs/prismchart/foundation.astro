---
import DocsLayout from '../../../layouts/DocsLayout.astro';

const sidebar = [
	{
		links: [
			{ href: '/docs/prismchart', label: 'Intro' },
			{ href: '/docs/prismchart/foundation', label: 'Foundation', active: true },
			{ href: '/docs/prismchart/chart-tools', label: 'Chart Tools' },
			{ href: '/docs/prismchart/layers', label: 'Layers' },
			{ href: '/docs/prismchart/customization', label: 'Customization' },
			{ href: '/docs/prismchart/presentation', label: 'Presentation' },
			{ href: '/docs/prismchart/alerts', label: 'Alerts' },
			{ href: '/docs/prismchart/bar-replay', label: 'Bar Replay' },
			{ href: '/docs/prismchart/shortcuts', label: 'Shortcuts' }
		]
	},
	{
		title: 'Drawing Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/drawing-tools-1', label: 'Drawing Tools 1' },
			{ href: '/docs/prismchart/drawing-tools-2', label: 'Drawing Tools 2' },
			{ href: '/docs/prismchart/drawing-tools-3', label: 'Drawing Tools 3' }
		]
	},
	{
		title: 'Analysis Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/quick-tools', label: 'Quick Tools' },
			{ href: '/docs/prismchart/time-context', label: 'Time Context' }
		]
	},
	{
		title: 'Portability',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/save-export', label: 'Save & Export' },
			{ href: '/docs/prismchart/copy-paste', label: 'Copy/Paste' }
		]
	},
	{
		title: 'ThinkPad',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/thinkpad', label: 'Intro' },
			{ href: '/docs/prismchart/thinkpad-customization', label: 'Customization' },
			{ href: '/docs/prismchart/thinkpad-workspace', label: 'Workspace' },
			{ href: '/docs/prismchart/thinkpad-trade-notes', label: 'Trade Notes' },
			{ href: '/docs/prismchart/thinkpad-screenshots', label: 'Screenshots' },
			{ href: '/docs/prismchart/thinkpad-review-trades', label: 'Review Trades' },
			{ href: '/docs/prismchart/thinkpad-performance', label: 'Performance' },
			{ href: '/docs/prismchart/thinkpad-troubleshooting', label: 'Troubleshooting' }
		]
	},
	{
		title: 'Development',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/building', label: 'Building' },
			{ href: '/docs/prismchart/changelog', label: 'Changelog' },
			{ href: '/docs/prismchart/known-issues', label: 'Known Issues' },
			{ href: '/docs/prismchart/credits', label: 'Credits' }
		]
	}
];

const toc = [
	{ href: '#video', label: 'Video' },
	{ href: '#price-scale', label: 'Price Scale' },
	{ href: '#time-scale', label: 'Time Scale' },
	{ href: '#zoom', label: 'Zoom' }
];
---

<DocsLayout title="Foundation - PrismChart - Docs" sidebar={sidebar} toc={toc} issuesUrl="https://github.com/ether-strannik/PrismChart/issues">
	<style>
		h1 {
			font-size: 1.8rem;
			font-weight: 600;
			margin-bottom: 0.5rem;
		}

		.tagline {
			color: #666;
			margin-bottom: 2rem;
		}

		h2 {
			font-size: 1.2rem;
			font-weight: 600;
			margin: 2rem 0 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid #e5e5e5;
		}

		.section-intro {
			font-weight: 500;
			color: #000;
			margin-bottom: 1rem;
		}

		h3 {
			font-size: 1rem;
			font-weight: 600;
			margin: 1.5rem 0 0.75rem;
		}

		p {
			color: #333;
			margin-bottom: 1rem;
		}

		ul {
			padding-left: 1.5rem;
			margin-bottom: 1.5rem;
		}

		li {
			padding: 0.3rem 0;
			color: #333;
		}

		.video-container {
			margin-bottom: 2rem;
			border-radius: 8px;
			overflow: hidden;
		}

		.video-container iframe {
			display: block;
			width: 100%;
			aspect-ratio: 16/9;
			border: none;
		}

		.note {
			color: #666;
			font-size: 0.95rem;
			padding: 1rem;
			background: #f5f5f5;
			border-radius: 4px;
			margin: 1.5rem 0;
		}
	</style>

	<h1>Foundation</h1>
	<p class="tagline">Custom coordinate system replacing MT5 defaults</p>

	<div class="video-container" id="video">
		<iframe
			id="pt-player"
			src="https://makertube.net/videos/embed/c4gJtuAbG8jbr68cbT6fma"
			allowfullscreen
			sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
		</iframe>
	</div>

	<script src="https://unpkg.com/@peertube/embed-api/build/player.min.js"></script>
	<script>
		async function initPeerTubePlayer() {
			const iframe = document.getElementById('pt-player');
			if (!iframe) return;

			const PeerTubePlayer = window['PeerTubePlayer'];
			if (!PeerTubePlayer) return;

			const player = new PeerTubePlayer(iframe);
			await player.ready;

			const resolutions = await player.getResolutions();
			const r720 = resolutions.find(r => r.height === 720);
			if (r720) {
				await player.setResolution(r720.id);
			}
		}

		document.addEventListener('astro:page-load', initPeerTubePlayer);
		if (document.readyState === 'complete') initPeerTubePlayer();
	</script>

	<p>MetaTrader 5's default chart display has limitations. It only shows broker time, which can be confusing when broker time 00:00 equals NY time 17:00. PrismChart replaces both the price and time scales with fully customizable, canvas-rendered alternatives.</p>

	<h2 id="price-scale">Price Scale</h2>
	<p class="section-intro">Display price levels your way.</p>
	<p>The default MT5 price axis is replaced with a canvas-rendered scale that you control. Set your preferred font, size, and colors. Price levels snap to rounded intervals you define - no more awkward decimal placements.</p>
	<p>The current price is always visible on the scale, updating in real-time as the market moves.</p>
	<p class="note"><strong>Tip:</strong> Match your price scale font to your trading style. Larger fonts work well on multi-monitor setups where you view charts from a distance.</p>

	<h2 id="time-scale">Time Scale</h2>
	<p class="section-intro">See time in your timezone, not your broker's.</p>
	<p>The timeline displays time the way TradingView does - clean, readable, and in your local timezone. Day, month, and year labels each have their own color settings, making it easy to scan across sessions.</p>
	<p>The format adapts automatically based on your timeframe. M1 charts show hours and minutes. Daily charts emphasize dates. Monthly charts highlight years.</p>

	<h3>Timezone Modes</h3>
	<p>Two options for timezone handling:</p>
	<ul>
		<li><strong>New York (Auto DST)</strong> - Follows US Eastern time with automatic daylight saving adjustments. Most forex traders prefer this since major sessions align with NY time.</li>
		<li><strong>Manual UTC Offset</strong> - Set a fixed offset from UTC. Use this if you trade a specific regional session or prefer your local time.</li>
	</ul>
	<p class="note"><strong>Note:</strong> Timezone affects the time scale display and OHLC info panel. It does not change how MT5 stores or processes bar data internally.</p>

	<h2 id="zoom">Zoom</h2>
	<p class="section-intro">Adaptive zoom for the custom time scale.</p>
	<p>Since PrismChart replaces the default timeline, zoom behavior had to be calibrated from scratch. Each timeframe has its own zoom increments, ensuring time segments remain readable whether you're zoomed in on 5-minute price action or zoomed out to see monthly structure.</p>
	<p>The result is a consistent experience across all timeframes - labels stay readable at every zoom level.</p>
</DocsLayout>
