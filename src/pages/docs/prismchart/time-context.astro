---
import DocsLayout from '../../../layouts/DocsLayout.astro';

const sidebar = [
	{
		links: [
			{ href: '/docs/prismchart', label: 'Intro' },
			{ href: '/docs/prismchart/foundation', label: 'Foundation' },
			{ href: '/docs/prismchart/chart-tools', label: 'Chart Tools' },
			{ href: '/docs/prismchart/layers', label: 'Layers' },
			{ href: '/docs/prismchart/customization', label: 'Customization' },
			{ href: '/docs/prismchart/presentation', label: 'Presentation' },
			{ href: '/docs/prismchart/alerts', label: 'Alerts' },
			{ href: '/docs/prismchart/bar-replay', label: 'Bar Replay' },
			{ href: '/docs/prismchart/shortcuts', label: 'Shortcuts' }
		]
	},
	{
		title: 'Drawing Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/drawing-tools-1', label: 'Drawing Tools 1' },
			{ href: '/docs/prismchart/drawing-tools-2', label: 'Drawing Tools 2' },
			{ href: '/docs/prismchart/drawing-tools-3', label: 'Drawing Tools 3' }
		]
	},
	{
		title: 'Analysis Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/quick-tools', label: 'Quick Tools' },
			{ href: '/docs/prismchart/time-context', label: 'Time Context', active: true }
		]
	},
	{
		title: 'Portability',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/save-export', label: 'Save & Export' },
			{ href: '/docs/prismchart/copy-paste', label: 'Copy/Paste' }
		]
	},
	{
		title: 'ThinkPad',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/thinkpad', label: 'Intro' },
			{ href: '/docs/prismchart/thinkpad-customization', label: 'Customization' },
			{ href: '/docs/prismchart/thinkpad-workspace', label: 'Workspace' },
			{ href: '/docs/prismchart/thinkpad-trade-notes', label: 'Trade Notes' },
			{ href: '/docs/prismchart/thinkpad-screenshots', label: 'Screenshots' },
			{ href: '/docs/prismchart/thinkpad-review-trades', label: 'Review Trades' },
			{ href: '/docs/prismchart/thinkpad-performance', label: 'Performance' },
			{ href: '/docs/prismchart/thinkpad-troubleshooting', label: 'Troubleshooting' }
		]
	},
	{
		title: 'Development',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/building', label: 'Building' },
			{ href: '/docs/prismchart/changelog', label: 'Changelog' },
			{ href: '/docs/prismchart/known-issues', label: 'Known Issues' },
			{ href: '/docs/prismchart/credits', label: 'Credits' }
		]
	}
];

const toc = [
	{ href: '#news-events', label: 'News Events' },
	{ href: '#sessions', label: 'Sessions' }
];
---

<DocsLayout title="Time Context - PrismChart - Docs" sidebar={sidebar} toc={toc} issuesUrl="https://github.com/ether-strannik/PrismChart/issues">
	<style>
		h1 {
			font-size: 1.8rem;
			font-weight: 600;
			margin-bottom: 0.5rem;
		}

		.tagline {
			color: #666;
			margin-bottom: 2rem;
		}

		h2 {
			font-size: 1.2rem;
			font-weight: 600;
			margin: 2rem 0 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid #e5e5e5;
		}

		p {
			color: #333;
			margin-bottom: 1rem;
		}

		.section-intro {
			font-weight: 500;
			color: #000;
			margin-bottom: 0.75rem;
		}

		code {
			background: #f5f5f5;
			padding: 0.2em 0.4em;
			border-radius: 3px;
			font-size: 0.9em;
		}

		.video-container {
			margin-bottom: 2rem;
			border-radius: 8px;
			overflow: hidden;
		}

		.video-container iframe {
			display: block;
			width: 100%;
			aspect-ratio: 16/9;
			border: none;
		}
	</style>

	<h1>Time Context</h1>
	<p class="tagline">Temporal reference framework for news events and trading sessions</p>

	<div class="video-container" id="video">
		<iframe
			id="pt-player"
			src="https://makertube.net/videos/embed/i4G2WnHQFxGXmSL7k4gZ6L"
			allowfullscreen
			sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
		</iframe>
	</div>

	<script src="https://unpkg.com/@peertube/embed-api/build/player.min.js"></script>
	<script>
		async function initPeerTubePlayer() {
			const iframe = document.getElementById('pt-player');
			if (!iframe) return;

			const PeerTubePlayer = window['PeerTubePlayer'];
			if (!PeerTubePlayer) return;

			const player = new PeerTubePlayer(iframe);
			await player.ready;

			const resolutions = await player.getResolutions();
			const r720 = resolutions.find(r => r.height === 720);
			if (r720) {
				await player.setResolution(r720.id);
			}
		}

		document.addEventListener('astro:page-load', initPeerTubePlayer);
		if (document.readyState === 'complete') initPeerTubePlayer();
	</script>

	<h2 id="news-events">News Events</h2>
	<p class="section-intro">Build your own economic calendar database.</p>
	<p>Add events like NFP, CPI, FOMC releases, or create custom news markers. The Event Manager dialog lets you add, edit, and delete events with custom names.</p>
	<p>Events appear as visual markers on the chart - horizontal bars spanning the event day and vertical lines at the exact event time. Each event type can have its own color for easy identification. Eastern Time inputs are automatically converted to broker time.</p>
	<p>Toggle visibility per event type to focus on what matters. All events persist to INI files so your calendar stays intact across sessions.</p>

	<h2 id="sessions">Sessions</h2>
	<p class="section-intro">Configure up to four trading sessions.</p>
	<p>Set custom names, start/end times, colors, and styles for each session. Times are defined in your target timezone. Sessions appear as horizontal bars at the chart bottom with labels.</p>
	<p>A master toggle enables or disables all sessions at once. Control how many days of session markers to display (1-30 days).</p>
	<p>The Create Markers feature generates vertical lines at session starts with rotated text labels. Vertical markers have their own style, width, and font settings. Labels reposition automatically when you zoom or scroll the chart.</p>
</DocsLayout>
