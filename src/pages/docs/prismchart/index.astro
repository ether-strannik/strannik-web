---
import DocsLayout from '../../../layouts/DocsLayout.astro';

const sidebar = [
	{
		links: [
			{ href: '/docs/prismchart', label: 'Intro', active: true },
			{ href: '/docs/prismchart/foundation', label: 'Foundation' },
			{ href: '/docs/prismchart/chart-tools', label: 'Chart Tools' },
			{ href: '/docs/prismchart/layers', label: 'Layers' },
			{ href: '/docs/prismchart/customization', label: 'Customization' },
			{ href: '/docs/prismchart/presentation', label: 'Presentation' },
			{ href: '/docs/prismchart/alerts', label: 'Alerts' },
			{ href: '/docs/prismchart/bar-replay', label: 'Bar Replay' },
			{ href: '/docs/prismchart/shortcuts', label: 'Shortcuts' }
		]
	},
	{
		title: 'Drawing Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/drawing-tools-1', label: 'Drawing Tools 1' },
			{ href: '/docs/prismchart/drawing-tools-2', label: 'Drawing Tools 2' },
			{ href: '/docs/prismchart/drawing-tools-3', label: 'Drawing Tools 3' }
		]
	},
	{
		title: 'Analysis Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/quick-tools', label: 'Quick Tools' },
			{ href: '/docs/prismchart/time-context', label: 'Time Context' }
		]
	},
	{
		title: 'Portability',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/save-export', label: 'Save & Export' },
			{ href: '/docs/prismchart/copy-paste', label: 'Copy/Paste' }
		]
	},
	{
		title: 'ThinkPad',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/thinkpad', label: 'Intro' },
			{ href: '/docs/prismchart/thinkpad-customization', label: 'Customization' },
			{ href: '/docs/prismchart/thinkpad-workspace', label: 'Workspace' },
			{ href: '/docs/prismchart/thinkpad-trade-notes', label: 'Trade Notes' },
			{ href: '/docs/prismchart/thinkpad-screenshots', label: 'Screenshots' },
			{ href: '/docs/prismchart/thinkpad-review-trades', label: 'Review Trades' },
			{ href: '/docs/prismchart/thinkpad-performance', label: 'Performance' },
			{ href: '/docs/prismchart/thinkpad-troubleshooting', label: 'Troubleshooting' }
		]
	},
	{
		title: 'Development',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/building', label: 'Building' },
			{ href: '/docs/prismchart/changelog', label: 'Changelog' },
			{ href: '/docs/prismchart/credits', label: 'Credits' }
		]
	}
];

const toc = [
	{ href: '#requirements', label: 'Requirements' },
	{ href: '#install', label: 'Install' },
	{ href: '#manual-installation', label: 'Manual Installation' },
	{ href: '#updates', label: 'Updates' },
	{ href: '#package-contents', label: 'Package Contents' },
	{ href: '#imagemagick', label: 'ImageMagick' }
];
---

<DocsLayout title="Intro - PrismChart - Docs" sidebar={sidebar} toc={toc} issuesUrl="https://github.com/ether-strannik/PrismChart/issues">
	<style>
		h1 {
			font-size: 1.8rem;
			font-weight: 600;
			margin-bottom: 0.5rem;
		}

		.tagline {
			color: #666;
			margin-bottom: 2rem;
		}

		h2 {
			font-size: 1.2rem;
			font-weight: 600;
			margin: 2rem 0 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid #e5e5e5;
		}

		h2:first-of-type {
			margin-top: 0;
		}

		ol, ul {
			padding-left: 1.5rem;
			margin-bottom: 1.5rem;
		}

		li {
			padding: 0.4rem 0;
			color: #333;
		}

		.note {
			color: #666;
			font-size: 0.95rem;
			padding: 1rem;
			background: #f5f5f5;
			border-radius: 4px;
			margin: 1.5rem 0;
		}

		h3 {
			font-size: 1.1rem;
			font-weight: 600;
			margin: 1.5rem 0 1rem;
		}

		h4 {
			font-size: 1rem;
			font-weight: 600;
			margin: 1.5rem 0 0.75rem;
		}

		p {
			color: #333;
			margin-bottom: 1rem;
		}

		pre {
			background: #1a1a1a;
			color: #e5e5e5;
			padding: 1rem;
			border-radius: 6px;
			overflow-x: auto;
			margin: 1rem 0 1.5rem;
			font-size: 0.9rem;
		}

		code {
			background: #f0f0f0;
			padding: 0.2rem 0.4rem;
			border-radius: 3px;
			font-size: 0.9rem;
		}

		pre code {
			background: none;
			padding: 0;
		}

		.video-container {
			margin-bottom: 2rem;
			border-radius: 8px;
			overflow: hidden;
		}

		.video-container iframe {
			display: block;
			width: 100%;
			aspect-ratio: 16/9;
			border: none;
		}

		img {
			max-width: 100%;
			border-radius: 6px;
			margin: 1.5rem 0;
		}
	</style>

	<h1>Intro</h1>
	<p class="tagline">Get started with PrismChart.</p>

	<p>PrismChart is an open source charting toolkit that extends MetaTrader 5 with drawing and analysis tools. Draw, organize, document, review.</p>

	<p>Inspired by <a href="/docs/prismchart/credits">open source projects</a> from the MQL5 Codebase and other sources.</p>

	<img src="/docs/prismchart/intro_image.jpg" alt="PrismChart" />

	<h2 id="requirements">Requirements</h2>
	<p>To use PrismChart, you'll need:</p>
	<ul>
		<li>Windows with MetaTrader 5 terminal installed</li>
		<li>.NET Framework (for the installer)</li>
	</ul>

	<h2 id="install">Install</h2>

	<div class="video-container" id="video">
		<div id="yt-player"></div>
	</div>

	<script>
		function initYouTubePlayer() {
			const container = document.getElementById('yt-player');
			if (!container || container.hasChildNodes()) return;

			new YT.Player('yt-player', {
				videoId: '8nVXbMy6JUM',
				playerVars: { rel: 0, modestbranding: 1 },
				events: {
					onReady: function(e) { e.target.setPlaybackQuality('hd720'); }
				}
			});
		}

		document.addEventListener('astro:page-load', () => {
			if (typeof YT !== 'undefined' && YT.Player) {
				initYouTubePlayer();
			} else {
				const tag = document.createElement('script');
				tag.src = 'https://www.youtube.com/iframe_api';
				document.head.appendChild(tag);
				window.onYouTubeIframeAPIReady = initYouTubePlayer;
			}
		});
	</script>

	<p>The easiest way to install PrismChart is through the installer.</p>
	<p>Download <a href="https://github.com/ether-strannik/PrismChart/raw/main/installer.zip">installer.zip</a> from the repository and extract it. Run <code>installer/installer.exe</code> to start.</p>
	<p>The installer walks you through the setup:</p>
	<ol>
		<li>Select your Windows user and MT5 terminal</li>
		<li>Choose the version to install (latest recommended)</li>
		<li>Optionally configure SMTP email settings for alerts</li>
		<li>Click <strong>Install</strong></li>
	</ol>
	<p class="note"><strong>Tip:</strong> You can re-run the installer anytime to update SMTP settings or install a different version. Access it via the <strong>Installer</strong> button in the Quick Tools (QT) dialog.</p>
	<p>The installer automatically handles file placement - copying <code>PrismChart.ex5</code> to your MT5 Indicators folder, configuring ThinkPad with correct paths, and creating <code>versions.json</code> to track the installed version.</p>
	<p>You can also install manually if you prefer more control over the process.</p>

	<h3 id="manual-installation">Manual Installation</h3>
	<p>Download the release package from <a href="https://github.com/ether-strannik/PrismChart/releases">GitHub Releases</a> and extract it into your MT5 data folder:</p>
	<pre><code>C:\Users\YourUsername\AppData\Roaming\MetaQuotes\Terminal\TerminalID\</code></pre>
	<p>The package is already organized with the correct folder structure. All files will be placed in their proper locations.</p>
	<p class="note"><strong>Tip:</strong> To find your TerminalID, open MT5 and go to <strong>File â†’ Open Data Folder</strong>. The path will be shown in the address bar.</p>

	<h4>Add Indicator to Chart</h4>
	<ol>
		<li>Open MT5</li>
		<li>In the Navigator panel, find <strong>Indicators</strong></li>
		<li>Locate <code>PrismChart</code></li>
		<li>Drag and drop onto any chart</li>
	</ol>

	<h2 id="updates">Updates</h2>
	<p>When a new version is available, PrismChart notifies you via a dialog in MT5.</p>
	<ol>
		<li>Click <strong>Yes</strong> to launch the installer in update mode</li>
		<li>Select the version to install</li>
		<li>Click <strong>Update</strong></li>
	</ol>
	<p>You can also click the <strong>Installer</strong> button in the Quick Tools (QT) dialog anytime to manually check for updates or change versions.</p>

	<h2 id="package-contents">Package Contents</h2>
	<p>After installation, files are organized as:</p>
	<pre><code>MQL5/
  Indicators/
    PrismChart.ex5           # Main indicator
  Files/
    PrismChart/
      smtp_sender.exe        # Email alert sender
      versions.json          # Installed version info
      Addons/
        installer/           # Installer app
        update_checker/      # Version checker
        thinkpad/            # Trade analysis app
          thinkpad.exe
          settings.ini       # Auto-configured paths</code></pre>

	<h2 id="imagemagick">ImageMagick for Screenshot Split</h2>
	<p>The <strong>Split</strong> button converts panorama screenshots to printable pages. This feature requires ImageMagick.</p>
	<ol>
		<li>Download from: <a href="https://imagemagick.org/script/download.php#windows">imagemagick.org</a></li>
		<li>Install with default settings</li>
		<li>Verify installation: run <code>magick -version</code> in Command Prompt</li>
	</ol>
	<p class="note"><strong>Note:</strong> This is optional. Without ImageMagick, all other features work normally.</p>
</DocsLayout>
