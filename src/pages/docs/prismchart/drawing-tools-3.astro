---
import DocsLayout from '../../../layouts/DocsLayout.astro';

const sidebar = [
	{
		links: [
			{ href: '/docs/prismchart', label: 'Intro' },
			{ href: '/docs/prismchart/foundation', label: 'Foundation' },
			{ href: '/docs/prismchart/chart-tools', label: 'Chart Tools' },
			{ href: '/docs/prismchart/layers', label: 'Layers' },
			{ href: '/docs/prismchart/customization', label: 'Customization' },
			{ href: '/docs/prismchart/presentation', label: 'Presentation' },
			{ href: '/docs/prismchart/alerts', label: 'Alerts' },
			{ href: '/docs/prismchart/bar-replay', label: 'Bar Replay' },
			{ href: '/docs/prismchart/shortcuts', label: 'Shortcuts' }
		]
	},
	{
		title: 'Drawing Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/drawing-tools-1', label: 'Drawing Tools 1' },
			{ href: '/docs/prismchart/drawing-tools-2', label: 'Drawing Tools 2' },
			{ href: '/docs/prismchart/drawing-tools-3', label: 'Drawing Tools 3', active: true }
		]
	},
	{
		title: 'Analysis Tools',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/quick-tools', label: 'Quick Tools' },
			{ href: '/docs/prismchart/time-context', label: 'Time Context' }
		]
	},
	{
		title: 'Portability',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/save-export', label: 'Save & Export' },
			{ href: '/docs/prismchart/copy-paste', label: 'Copy/Paste' }
		]
	},
	{
		title: 'ThinkPad',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/thinkpad', label: 'Intro' },
			{ href: '/docs/prismchart/thinkpad-customization', label: 'Customization' },
			{ href: '/docs/prismchart/thinkpad-workspace', label: 'Workspace' },
			{ href: '/docs/prismchart/thinkpad-trade-notes', label: 'Trade Notes' },
			{ href: '/docs/prismchart/thinkpad-screenshots', label: 'Screenshots' },
			{ href: '/docs/prismchart/thinkpad-review-trades', label: 'Review Trades' },
			{ href: '/docs/prismchart/thinkpad-performance', label: 'Performance' },
			{ href: '/docs/prismchart/thinkpad-troubleshooting', label: 'Troubleshooting' }
		]
	},
	{
		title: 'Development',
		collapsible: true,
		links: [
			{ href: '/docs/prismchart/building', label: 'Building' },
			{ href: '/docs/prismchart/changelog', label: 'Changelog' },
			{ href: '/docs/prismchart/credits', label: 'Credits' }
		]
	}
];

const toc = [
	{ href: '#video', label: 'Video' },
	{ href: '#position-tool', label: 'Position Tool' },
	{ href: '#lock-unlock', label: 'Lock/Unlock' },
	{ href: '#show-hide', label: 'Show/Hide' }
];
---

<DocsLayout title="Drawing Tools 3 - PrismChart - Docs" sidebar={sidebar} toc={toc} issuesUrl="https://github.com/ether-strannik/PrismChart/issues">
	<style>
		h1 {
			font-size: 1.8rem;
			font-weight: 600;
			margin-bottom: 0.5rem;
		}

		.tagline {
			color: #666;
			margin-bottom: 2rem;
		}

		h2 {
			font-size: 1.2rem;
			font-weight: 600;
			margin: 2rem 0 1rem;
			padding-bottom: 0.5rem;
			border-bottom: 1px solid #e5e5e5;
		}

		p {
			color: #333;
			margin-bottom: 1rem;
		}

		ul {
			padding-left: 1.5rem;
			margin-bottom: 1.5rem;
		}

		li {
			padding: 0.3rem 0;
			color: #333;
		}

		.section-intro {
			font-weight: 500;
			color: #000;
			margin-bottom: 0.75rem;
		}

		.video-container {
			margin-bottom: 2rem;
			border-radius: 8px;
			overflow: hidden;
		}

		.video-container iframe {
			display: block;
			width: 100%;
			aspect-ratio: 16/9;
			border: none;
		}
	</style>

	<h1>Drawing Tools 3</h1>
	<p class="tagline">Position tool and layer controls</p>

	<div class="video-container" id="video">
		<iframe
			id="pt-player"
			src="https://makertube.net/videos/embed/48Gzfte7xw7BhwmeRsnst5"
			allowfullscreen
			sandbox="allow-same-origin allow-scripts allow-popups allow-forms">
		</iframe>
	</div>

	<script src="https://unpkg.com/@peertube/embed-api/build/player.min.js"></script>
	<script>
		async function initPeerTubePlayer() {
			const iframe = document.getElementById('pt-player');
			if (!iframe) return;

			const PeerTubePlayer = window['PeerTubePlayer'];
			if (!PeerTubePlayer) return;

			const player = new PeerTubePlayer(iframe);
			await player.ready;

			const resolutions = await player.getResolutions();
			const r720 = resolutions.find(r => r.height === 720);
			if (r720) {
				await player.setResolution(r720.id);
			}
		}

		document.addEventListener('astro:page-load', initPeerTubePlayer);
		if (document.readyState === 'complete') initPeerTubePlayer();
	</script>

	<h2 id="position-tool">Position Tool</h2>
	<p class="section-intro">Plan trades with visual risk management.</p>
	<p>The Position Tool maps out entry, stop loss, and up to three take profit levels. Click to place entry, then drag to set your stop loss - the tool automatically detects long or short based on drag direction.</p>
	<p>Take profit levels default to 1R, 2R, and 3R multiples of your risk. Each level displays info labels showing pips and R:R ratio. All lines are draggable - move any level and the zones update automatically.</p>
	<p>A vertical pillar connects the levels. Drag it to reposition the entire setup without changing the relative distances. The Sync button exports your SL/TP values to an INI file for EA integration.</p>

	<h2 id="lock-unlock">Lock/Unlock</h2>
	<p class="section-intro">Prevent accidental modifications.</p>
	<p>Lock objects to protect them from selection and movement. Each layer and individual object has its own lock toggle in the Drawing Manager. The toolbar includes a Lock All button to secure everything at once.</p>
	<p>Locked objects remain visible but can't be clicked or dragged until unlocked.</p>

	<h2 id="show-hide">Show/Hide</h2>
	<p class="section-intro">Control what's visible on your chart.</p>
	<p>Toggle visibility per object or per layer. Hidden objects disappear from the chart but remain in the layer system - unhide them anytime. The toolbar's Hide All button quickly clears visual clutter.</p>
	<p>Layer checkboxes work as select all - check or uncheck a layer to toggle all its children at once.</p>
</DocsLayout>
